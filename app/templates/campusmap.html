<!--
   html with some javascript. we could use flask/python to host this website.

   this sample file was found at:
   https://developers.google.com/maps/documentation/javascript/examples/directions-panel

   we can change the direction points to match these:
   https://www.fullerton.edu/campusmap/

   we could also add in custom markers, maybe with a legend. for the parking lots and other poi (points of interest) on campus. something like this:
   https://developers.google.com/maps/documentation/javascript/adding-a-legend

    -->
{% extends "base.html" %}

{% block bar %}
    <div class="ui blue inverted attached secondary menu" id="topbar">
        <button class="ui icon button" id="left-sidebar-toggle">
          <i class="blue align justify icon"></i>
        </button>

        <a class="item" id="offline-map">
        <i class="teal map icon"></i>Offline Map/Legend</a>


        <div class="ui blue floating labeled icon dropdown button">
          <i class="map marker alternative icon"></i>
          <span class="text" id="start">Current Location</span>
          <div class="menu">
            <div class="item" id="CurrentLocation">
              Current Location
            </div>
            <div class="item" data-value="{{ getCoords('PA') }}">
              Parking Lot A
            </div>
            <div class="item" data-value="{{ getCoords('PE') }}">
              Parking Lot E
            </div>
            <div class="item" data-value="{{ getCoords('PG') }}">
              Parking Lot G
            </div>
            <div class="item" data-value="{{ getCoords('PS') }}">
              Parking Lot S
            </div>
            <div class="item" data-value="{{ getCoords('DDP') }}">
            Dumbo Down Parking
            </div>
            <div class="item" data-value="{{ getCoords('NPS') }}">
              Nutwood Parking Structure
            </div>
            <div class="item" data-value="{{ getCoords('EPS') }}">
              Eastside Parking Structure
            </div>
            <div class="item" data-value="{{ getCoords('SCPS') }}">
              State College Parking Structure
            </div>
          </div>
        </div>

        <div class="ui action input" id="destination">
            <form id="geolocation" action="" method="POST">
                <input type="hidden" id="location" name="location" value="">
                <input type="text" id="src1" name="src1" style="width: 500px" placeholder="Enter Class e.g cs101">
                 <button class="ui blue compact icon button" type="Submit" id="submit">
                    <i class="search icon"></i>
                </button>
        </div>
    </div>
{% endblock %}

{% block map %}

{% block display %} {% endblock %}
    <div id="map"></div>
{% endblock %}

{% block mapscript %}
	<script>
    var latlong;
    var map;
    var GeoMarker;
    var directionsDisplay;
    var directionsService;
    var markers = []
    var markerButtons = document.getElementsByClassName('ui button marker');
    var dirButtons = document.getElementsByClassName('ui button positive');


    const csufLocation = {
            lat: 33.881994,
            lng: -117.885076
    };

    initMap();

    if (navigator.geolocation) { // Call geolocation to get user's current position
        navigator.geolocation.getCurrentPosition(getCurrPos, errorCallback, {
            enableHighAccuracy: true
        });
    }

    function getCurrPos(position) {
        curLoc = position.coords.latitude + "," + position.coords.longitude;
        document.getElementById('location').value = curLoc;
        $('#CurrentLocation').data('value', curLoc);
    }

    function errorCallback() {}

    for (let i = 0; i < markerButtons.length; i++) {
        var button = markerButtons[i];
        var latlng = button.value.split(',');
        var lat = parseFloat(latlng[0]);
        var lng = parseFloat(latlng[1]);


        function pickImage(bld){
          if (bld == "CS"){
            var image = '<img src="{{url_for('static', filename='img/CS.jpg')}}" height="500" width="500">';
          }
          else if (bld == "SGMH") {
            var image = '<img src="{{url_for('static', filename='img/SGMH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PL") {
            var image = '<img src="{{url_for('static', filename='img/PL.jpg')}}" height="500" width="500">';
          }
          else if (bld == "MH") {
            var image = '<img src="{{url_for('static', filename='img/MH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "E") {
            var image = '<img src="{{url_for('static', filename='img/E.jpg')}}" height="500" width="500">';
          }
          else if (bld == "H") {
            var image = '<img src="{{url_for('static', filename='img/H.jpg')}}" height="500" width="500">';
          }
          else if (bld == "KHS") {
            var image = '<img src="{{url_for('static', filename='img/KHS.jpg')}}" height="500" width="500">';
          }
          else if (bld == "CSH") {
            var image = '<img src="{{url_for('static', filename='img/CSH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "SR") {
            var image = '<img src="{{url_for('static', filename='img/SR.jpg')}}" height="500" width="500">';
          }
          else if (bld == "AS") {
            var image = '<img src="{{url_for('static', filename='img/AS.jpg')}}" height="500" width="500">';
          }
          else if (bld == "MC") {
            var image = '<img src="{{url_for('static', filename='img/MC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "CC") {
            var image = '<img src="{{url_for('static', filename='img/CC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "CPAC") {
            var image = '<img src="{{url_for('static', filename='img/CPAC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "DBH") {
            var image = '<img src="{{url_for('static', filename='img/DBH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "EC") {
            var image = '<img src="{{url_for('static', filename='img/EC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "G") {
            var image = '<img src="{{url_for('static', filename='img/G.jpg')}}" height="500" width="500">';
          }
          else if (bld == "LH") {
            var image = '<img src="{{url_for('static', filename='img/LH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PLS") {
            var image = '<img src="{{url_for('static', filename='img/PLS.jpg')}}" height="500" width="500">';
          }
          else if (bld == "RGC") {
            var image = '<img src="{{url_for('static', filename='img/RGC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "TG") {
            var image = '<img src="{{url_for('static', filename='img/TG.jpg')}}" height="500" width="500">';
          }
          else if (bld == "UH") {
            var image = '<img src="{{url_for('static', filename='img/UH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "VA") {
            var image = '<img src="{{url_for('static', filename='img/VA.jpg')}}" height="500" width="500">';
          }
          else if (bld == "BE") {
            var image = '<img src="{{url_for('static', filename='img/BE.jpg')}}" height="500" width="500">';
          }
          else if (bld == "CJ") {
            var image = '<img src="{{url_for('static', filename='img/CJ.jpg')}}" height="500" width="500">';
          }
          else if (bld == "GA") {
            var image = '<img src="{{url_for('static', filename='img/GA.jpg')}}" height="500" width="500">';
          }
          else if (bld == "JU") {
            var image = '<img src="{{url_for('static', filename='img/JU.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PEX") {
            var image = '<img src="{{url_for('static', filename='img/PEX.jpg')}}" height="500" width="500">';
          }
          else if (bld == "MST") {
            var image = '<img src="{{url_for('static', filename='img/MST.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PLST") {
            var image = '<img src="{{url_for('static', filename='img/PLST.jpg')}}" height="500" width="500">';
          }
          else if (bld == "TSUST") {
            var image = '<img src="{{url_for('static', filename='img/TSUST.jpg')}}" height="500" width="500">';
          }
          else if (bld == "CPT") {
            var image = '<img src="{{url_for('static', filename='img/CPT.jpg')}}" height="500" width="500">';
          }
          else if (bld == "TSUT") {
            var image = '<img src="{{url_for('static', filename='img/TSUT.jpg')}}" height="500" width="500">';
          }
          else if (bld == "BOFA") {
            var image = '<img src="{{url_for('static', filename='img/BOFA.jpg')}}" height="500" width="500">';
          }
          else if (bld == "CATM") {
            var image = '<img src="{{url_for('static', filename='img/CATM.jpg')}}" height="500" width="500">';
          }
          else if (bld == "WATM") {
            var image = '<img src="{{url_for('static', filename='img/WATM.jpg')}}" height="500" width="500">';
          }
          else if (bld == "USB") {
            var image = '<img src="{{url_for('static', filename='img/USB.jpg')}}" height="500" width="500">';
          }
          else if (bld == "BA") {
            var image = '<img src="{{url_for('static', filename='img/BA.jpg')}}" height="500" width="500">';
          }
          else if (bld == "ECSQ") {
            var image = '<img src="{{url_for('static', filename='img/ECSQ.jpg')}}" height="500" width="500">';
          }
          else if (bld == "Q") {
            var image = '<img src="{{url_for('static', filename='img/Q.jpg')}}" height="500" width="500">';
          }
          else if (bld == "TW") {
            var image = '<img src="{{url_for('static', filename='img/TW.jpg')}}" height="500" width="500">';
          }
          else if (bld == "EHS") {
            var image = '<img src="{{url_for('static', filename='img/EHS.jpg')}}" height="500" width="500">';
          }
          else if (bld == "TRI") {
            var image = '<img src="{{url_for('static', filename='img/TRI.jpg')}}" height="500" width="500">';
          }
          else if (bld == "P") {
            var image = '<img src="{{url_for('static', filename='img/P.jpg')}}" height="500" width="500">';
          }
          else if (bld == "CP") {
            var image = '<img src="{{url_for('static', filename='img/CP.jpg')}}" height="500" width="500">';
          }
          else if (bld == "CPW") {
            var image = '<img src="{{url_for('static', filename='img/CPW.jpg')}}" height="500" width="500">';
          }
          else if (bld == "SHCC") {
            var image = '<img src="{{url_for('static', filename='img/SHCC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "UP") {
            var image = '<img src="{{url_for('static', filename='img/UP.jpg')}}" height="500" width="500">';
          }
          else if (bld == "ARSC") {
            var image = '<img src="{{url_for('static', filename='img/ARSC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "CRC") {
            var image = '<img src="{{url_for('static', filename='img/CRC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "SRC") {
            var image = '<img src="{{url_for('static', filename='img/SRC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "RH") {
            var image = '<img src="{{url_for('static', filename='img/RH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "SH") {
            var image = '<img src="{{url_for('static', filename='img/SH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "TH") {
            var image = '<img src="{{url_for('static', filename='img/TH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "TROTC") {
            var image = '<img src="{{url_for('static', filename='img/TROTC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "TSH") {
            var image = '<img src="{{url_for('static', filename='img/TSH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "TSU") {
            var image = '<img src="{{url_for('static', filename='img/TSU.jpg')}}" height="500" width="500">';
          }
          else if (bld == "TS") {
            var image = '<img src="{{url_for('static', filename='img/TS.jpg')}}" height="500" width="500">';
          }
          else if (bld == "GF") {
            var image = '<img src="{{url_for('static', filename='img/GF.jpg')}}" height="500" width="500">';
          }
          else if (bld == "AF") {
            var image = '<img src="{{url_for('static', filename='img/AF.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PAS") {
            var image = '<img src="{{url_for('static', filename='img/PAS.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PA") {
            var image = '<img src="{{url_for('static', filename='img/PA.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PC") {
            var image = '<img src="{{url_for('static', filename='img/PC.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PCE") {
            var image = '<img src="{{url_for('static', filename='img/PCE.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PCW") {
            var image = '<img src="{{url_for('static', filename='img/PCW.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PE") {
            var image = '<img src="{{url_for('static', filename='img/PE.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PF") {
            var image = '<img src="{{url_for('static', filename='img/PF.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PG") {
            var image = '<img src="{{url_for('static', filename='img/PG.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PH") {
            var image = '<img src="{{url_for('static', filename='img/PH.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PI") {
            var image = '<img src="{{url_for('static', filename='img/PI.jpg')}}" height="500" width="500">';
          }
          else if (bld == "PS") {
            var image = '<img src="{{url_for('static', filename='img/PS.jpg')}}" height="500" width="500">';
          }
          else if (bld == "AP") {
            var image = '<img src="{{url_for('static', filename='img/AP.jpg')}}" height="500" width="500">';
          }
          else if (bld == "CPFSP") {
            var image = '<img src="{{url_for('static', filename='img/CPFSP.jpg')}}" height="500" width="500">';
          }
          else if (bld == "DDP") {
            var image = '<img src="{{url_for('static', filename='img/DDP.jpg')}}" height="500" width="500">';
          }
          else if (bld == "EPS") {
            var image = '<img src="{{url_for('static', filename='img/EPS.jpg')}}" height="500" width="500">';
          }
          else if (bld == "NPS") {
            var image = '<img src="{{url_for('static', filename='img/NPS.jpg')}}" height="500" width="500">';
          }
          else if (bld == "SCPS") {
            var image = '<img src="{{url_for('static', filename='img/SCPS.jpg')}}" height="500" width="500">';
          }
          return image;
        }

        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat, lng),
            icon: defaultIcon,
            animation: google.maps.Animation.DROP
        });
        // Two event listeners - one for mouseover, one for mouseout,
        // to change the colors back and forth.
        marker.addListener('mouseover', function() {
          this.setIcon(highlightedIcon);
          this.setAnimation(google.maps.Animation.BOUNCE);
        });

        marker.addListener('mouseout', function() {
          this.setIcon(defaultIcon);
          this.setAnimation(null);
        });

        markers.push(marker);
        marker.setMap(map);
        marker.setVisible(false);

        button.addEventListener('click', function() {

            if (this.className == "ui button ebuildings marker") {
              markers[i].setIcon(ebuildings);
            }
            else if (this.className == "ui button fdbuildings marker") {
              markers[i].setIcon(fdbuildings);
            }
            else if (this.className == "ui button bbuildings marker") {
              markers[i].setIcon(bbuildings);
            }
            else if (this.className == "ui button lm marker") {
              markers[i].setIcon(lm);
            }
            else if (this.className == "ui button fbuildings marker") {
              markers[i].setIcon(fbuildings);
            }
            else if (this.className == "ui button pbuildings marker") {
              markers[i].setIcon(pbuildings);
            }
            else if (this.className == "ui button cy marker") {
              markers[i].setIcon(cy);
            }
            else if (this.className == "ui button abuildings marker") {
              markers[i].setIcon(abuildings);
            }
            else if (this.className == "ui button ssbuildings marker") {
              markers[i].setIcon(ssbuildings);
            }
            else if (this.className == "ui button tbuildings marker") {
              markers[i].setIcon(tbuildings);
            }
            else if (this.className == "ui button sbuildings marker") {
              markers[i].setIcon(sbuildings);
            }
            else if (this.className == "ui button embuildings marker") {
              markers[i].setIcon(embuildings);
            }
            else {
              markers[i].setIcon(defaultIcon);
            }

            if (this.value != "ON") {

                markers[i].setVisible(true);
                this.value="ON";
                //Added here for Info-Window
                var bldid = this.id;
                //for getting abv
                bldid = bldid.split("-");
                var array = maindict[bldid[0]];
                var image = pickImage(bldid[0]);
                var largeInfowindow = new google.maps.InfoWindow();

                var contentString = '<div id="content">'+
                                    '<div id="siteNotice">'+
                                    '</div>'+
                                    '<div class="ui buttons">'+
                                    '<button class="ui inverted green button"  id="'+ bldid[0] + '-direction">Direction</button>'+
                                    '<button class="ui button">Street View</button>'+
                                    '</div>'+
                                    '<h1 id="firstHeading" class="firstHeading">'+ array[0] +'</h1>'+
                                    '<div id="bodyContent">'+ image +
        //                                    '<img src="{{url_for('static', filename='img/asktuffy2.png')}}">'+
                                    '<p><b>'+ array[0] + '</b> :'+ array[1] + '</p>'+
                                    '<p><a href="' + array[2] + '">Link to '+ array[0] +'</a> '+
                                    '</div>'+
                                    '</div>';


                largeInfowindow.setContent(contentString);

                markers[i].addListener('click', function() {
                  largeInfowindow.open(map, markers[i]);
                });
                // Till here Info-Window
                markers[i].setTitle(array[0]);
                markers[i].setAnimation(google.maps.Animation.DROP);
            }
            else {
                markers[i].setVisible(false);
                this.value="OFF";
            }
        });
    }


    for (let i = 0; i < dirButtons.length; i++) {
        var button = dirButtons[i];
        if (button.className === 'ui positive button') {
            button.addEventListener('click', function() {
                document.getElementById('src1').value = this.id;
            });
        }
    }

  //   function showStreetView(marker, infowindow) {
  //       alert("hi");
  //       var streetViewService = new google.maps.StreetViewService();
  //       var radius = 50;
  //       // In case the status is OK, which means the pano was found, compute the
  //         // position of the streetview image, then calculate the heading, then get a
  //         // panorama from that and set the options
  //         function getStreetView(data, status) {
  //           if (status == google.maps.StreetViewStatus.OK) {
  //             var nearStreetViewLocation = data.location.latLng;
  //             var heading = google.maps.geometry.spherical.computeHeading(
  //               nearStreetViewLocation, markers.position);
  //               infowindow.setContent('<div>' + array[0] + '</div><div id="pano"></div>');
  //               var panoramaOptions = {
  //                 position: nearStreetViewLocation,
  //                 pov: {
  //                   heading: heading,
  //                   pitch: 30
  //                 }
  //               };
  //               var panorama = new google.maps.StreetViewPanorama(
  //               document.getElementById('pano'), panoramaOptions);
  //           }
  //           else {
  //             infowindow.setContent(contentString);
  //           }
  //         }
  //         // Use streetview service to get the closest streetview image within
  //     // 50 meters of the markers position
  //     streetViewService.getPanoramaByLocation(marker.position, radius, getStreetView);
  //     // Open the infowindow on the correct marker.
  //     infowindow.open(map, marker);
  // }


    function initMap() { // displays map on page, sets up variables for the directions service for use later

        var travellingMode = "WALKING";
//        var travellingMode = "BICYCLING";
        directionsDisplay = new google.maps.DirectionsRenderer;
        directionsService = new google.maps.DirectionsService;
        var mapOptions = {
            zoom: 16,
            center: csufLocation,
            streetViewControl: false,
            mapTypeControl: false,
            gestureHandling: 'greedy',
            styles: mapstyles
            };
        map = new google.maps.Map(document.getElementById('map'), mapOptions);

        var PLSCoords = [
          {lat: 33.881334, lng: -117.885711},
          {lat: 33.881341, lng: -117.885341},
          {lat:33.881346, lng:-117.885014},
          {lat:33.881122, lng:-117.885006},
          {lat:33.880898, lng:-117.885006},
          {lat:33.880896, lng:-117.885273},
          {lat:33.880890, lng:-117.885724},
          {lat:33.881102, lng:-117.885701},
          {lat:33.881340, lng:-117.885703},
          {lat: 33.881334, lng: -117.885711}
        ];
        var PLCoords = [
          {lat: 33.882109, lng: -117.885717},
          {lat: 33.882110, lng: -117.885700},
          {lat: 33.882139, lng: -117.885636},
          {lat: 33.882158, lng: -117.885563},
          {lat: 33.882165, lng: -117.885490},
          {lat: 33.882160, lng: -117.885418},
          {lat: 33.882142, lng: -117.885343},
          {lat: 33.882116, lng: -117.885282},
          {lat: 33.882117, lng: -117.885092},
          {lat: 33.882082, lng: -117.885091},
          {lat: 33.882067, lng: -117.885068},
          {lat: 33.882051, lng: -117.885090},
          {lat: 33.881998, lng: -117.885088},
          {lat: 33.881999, lng: -117.885062},
          {lat: 33.882034, lng: -117.885039},
          {lat: 33.882033, lng: -117.885027},
          {lat: 33.881995, lng: -117.884999},
          {lat: 33.881952, lng: -117.884998},
          {lat: 33.881915, lng: -117.885024},
          {lat: 33.881939, lng: -117.885052},
          {lat: 33.881950, lng: -117.885058},
          {lat: 33.881950, lng: -117.885088},
          {lat: 33.881581, lng: -117.885072},
          {lat: 33.881575, lng: -117.885006},
          {lat: 33.881509, lng: -117.885005},
          {lat: 33.881506, lng: -117.885134},
          {lat: 33.881460, lng: -117.885077},
          {lat: 33.881452, lng: -117.885077},
          {lat: 33.881445, lng: -117.885701},
          {lat: 33.881472, lng: -117.885677},
          {lat: 33.881490, lng: -117.885654},
          {lat: 33.881503, lng: -117.885633},
          {lat: 33.881498, lng: -117.885751},
          {lat: 33.881501, lng: -117.885751},
          {lat: 33.881501, lng: -117.885782},
          {lat: 33.881569, lng: -117.885790},
          {lat: 33.881571, lng: -117.885718},
          {lat: 33.881602, lng: -117.885718},
          {lat: 33.881617, lng: -117.885738},
          {lat: 33.881633, lng: -117.885718},
          {lat: 33.882043, lng: -117.885716},
          {lat: 33.882058, lng: -117.885738},
          {lat: 33.882075, lng: -117.885716}
          ];
        var UHCoords = [
          {lat:33.879920, lng:-117.884259},
          {lat:33.879935, lng:-117.884136},
          {lat:33.879922, lng:-117.884059},
          {lat:33.879871, lng:-117.884058},
          {lat:33.879861, lng:-117.883867},
          {lat:33.879620, lng:-117.883836},
          {lat:33.879547, lng:-117.883865},
          {lat:33.879545, lng:-117.884063},
          {lat:33.879270, lng:-117.884044},
          {lat:33.879270, lng:-117.884266},
          {lat:33.879355, lng:-117.884360},
          {lat:33.879533, lng:-117.884284},
          {lat:33.879537, lng:-117.884530},
          {lat:33.879579, lng:-117.884605},
          {lat:33.879875, lng:-117.884612},
          {lat:33.879880, lng:-117.884355},
          {lat:33.879881, lng:-117.884259},
          {lat:33.879928, lng:-117.884257},
          {lat:33.879920, lng:-117.884259}
          ];
        var RGCCoords = [
          {lat:33.884102, lng:-117.883279},
          {lat:33.883979, lng:-117.883135},
          {lat:33.883807, lng:-117.883116},
          {lat:33.883488, lng:-117.883114},
          {lat:33.883231, lng:-117.883120},
          {lat:33.883201, lng:-117.883130},
          {lat:33.883201, lng:-117.883351},
          {lat:33.883413, lng:-117.883363},
          {lat:33.883420, lng:-117.883424},
          {lat:33.883592, lng:-117.883429},
          {lat:33.883871, lng:-117.883437},
          {lat:33.884019, lng:-117.883389},
          {lat:33.884102, lng:-117.883279}
          ];
        var LHCoords = [
          {lat: 33.879129, lng: -117.884898},
          {lat: 33.879134, lng: -117.884851},
          {lat: 33.879135, lng: -117.884843},
          {lat: 33.879127, lng: -117.884843},
          {lat: 33.879127, lng: -117.884824},
          {lat: 33.879175, lng: -117.884825},
          {lat: 33.879175, lng: -117.884833},
          {lat: 33.879185, lng: -117.884833},
          {lat: 33.879187, lng: -117.884573},
          {lat: 33.879178, lng: -117.884571},
          {lat: 33.879176, lng: -117.884575},
          {lat: 33.879176, lng: -117.884580},
          {lat: 33.879129, lng: -117.884579},
          {lat: 33.879131, lng: -117.884526},
          {lat: 33.879138, lng: -117.884526},
          {lat: 33.879138, lng: -117.884513},
          {lat: 33.879136, lng: -117.884507},
          {lat: 33.879184, lng: -117.884508},
          {lat: 33.879186, lng: -117.884503},
          {lat: 33.879192, lng: -117.884043},
          {lat: 33.878841, lng: -117.884035},
          {lat: 33.878834, lng: -117.884519},
          {lat: 33.878887, lng: -117.884520},
          {lat: 33.878871, lng: -117.884559},
          {lat: 33.878870, lng: -117.884573},
          {lat: 33.878880, lng: -117.884578},
          {lat: 33.878880, lng: -117.884572},
          {lat: 33.878850, lng: -117.884578},
          {lat: 33.878851, lng: -117.884571},
          {lat: 33.878842, lng: -117.884569},
          {lat: 33.878818, lng: -117.884562},
          {lat: 33.878814, lng: -117.884826},
          {lat: 33.878825, lng: -117.884826},
          {lat: 33.878831, lng: -117.884816},
          {lat: 33.878880, lng: -117.884818},
          {lat: 33.878879, lng: -117.884858},
          {lat: 33.878870, lng: -117.884880},
          {lat: 33.878870, lng: -117.884894},
          {lat: 33.879129, lng: -117.884898}
          ];
        var MHCoords = [
          {lat: 33.879646, lng: -117.886362},
          {lat: 33.879647, lng: -117.886357},
          {lat: 33.879649, lng: -117.886351},
          {lat: 33.879654, lng: -117.886351},
          {lat: 33.879656, lng: -117.886337},
          {lat: 33.879659, lng: -117.886247},
          {lat: 33.879742, lng: -117.886249},
          {lat: 33.879746, lng: -117.886139},
          {lat: 33.879744, lng: -117.886131},
          {lat: 33.879695, lng: -117.886129},
          {lat: 33.879698, lng: -117.886019},
          {lat: 33.879764, lng: -117.886025},
          {lat: 33.879759, lng: -117.885995},
          {lat: 33.879926, lng: -117.886002},
          {lat: 33.879936, lng: -117.885995},
          {lat: 33.879935, lng: -117.885989},
          {lat: 33.879933, lng: -117.885988},
          {lat: 33.879934, lng: -117.885921},
          {lat: 33.879864, lng: -117.885918},
          {lat: 33.879859, lng: -117.885588},
          {lat: 33.879898, lng: -117.885589},
          {lat: 33.879907, lng: -117.885645},
          {lat: 33.879922, lng: -117.885686},
          {lat: 33.879956, lng: -117.885675},
          {lat: 33.879943, lng: -117.885644},
          {lat: 33.879933, lng: -117.885603},
          {lat: 33.879932, lng: -117.885590},
          {lat: 33.879939, lng: -117.885590},
          {lat: 33.879941, lng: -117.885542},
          {lat: 33.879939, lng: -117.885538},
          {lat: 33.879933, lng: -117.885538},
          {lat: 33.879934, lng: -117.885525},
          {lat: 33.879945, lng: -117.885488},
          {lat: 33.879961, lng: -117.885455},
          {lat: 33.879961, lng: -117.885448},
          {lat: 33.879928, lng: -117.885431},
          {lat: 33.879913, lng: -117.885465},
          {lat: 33.879902, lng: -117.885507},
          {lat: 33.879898, lng: -117.885536},
          {lat: 33.879860, lng: -117.885535},
          {lat: 33.879869, lng: -117.885096},
          {lat: 33.879866, lng: -117.885090},
          {lat: 33.879866, lng: -117.885053},
          {lat: 33.879852, lng: -117.885023},
          {lat: 33.879781, lng: -117.885050},
          {lat: 33.879782, lng: -117.885023},
          {lat: 33.879521, lng: -117.885014},
          {lat: 33.879529, lng: -117.885042},
          {lat: 33.879443, lng: -117.885040},
          {lat: 33.879447, lng: -117.885543},
          {lat: 33.879431, lng: -117.885544},
          {lat: 33.879429, lng: -117.885591},
          {lat: 33.879446, lng: -117.885592},
          {lat: 33.879438, lng: -117.885921},
          {lat: 33.879383, lng: -117.885918},
          {lat: 33.879373, lng: -117.886329},
          {lat: 33.879620, lng: -117.886337},
          {lat: 33.879620, lng: -117.886356},
          {lat: 33.879646, lng: -117.886362}
          ];
        var DBHCoords = [
          {lat: 33.879299, lng: -117.886533},
          {lat: 33.879318, lng: -117.885031},
          {lat: 33.879105, lng: -117.885020},
          {lat: 33.879097, lng: -117.885053},
          {lat: 33.879092, lng: -117.885107},
          {lat: 33.878995, lng: -117.885109},
          {lat: 33.878983, lng: -117.885554},
          {lat: 33.879056, lng: -117.885559},
          {lat: 33.879056, lng: -117.885617},
          {lat: 33.878981, lng: -117.885619},
          {lat: 33.878969, lng: -117.886610},
          {lat: 33.879179, lng: -117.886610},
          {lat: 33.879188, lng: -117.886580},
          {lat: 33.879210, lng: -117.886571},
          {lat: 33.879215, lng: -117.886542},
          {lat: 33.879291, lng: -117.886539},
          {lat: 33.879299, lng: -117.886533}
        ];
        var ECCoords = [
          {lat: 33.881674, lng: -117.884549},
          {lat: 33.881677, lng: -117.884285},
          {lat: 33.881438, lng: -117.884278},
          {lat: 33.881442, lng: -117.883931},
          {lat: 33.881158, lng: -117.883931},
          {lat: 33.881156, lng: -117.884171},
          {lat: 33.881148, lng: -117.884171},
          {lat: 33.881147, lng: -117.884220},
          {lat: 33.881158, lng: -117.884221},
          {lat: 33.881155, lng: -117.884492},
          {lat: 33.881145, lng: -117.884492},
          {lat: 33.881143, lng: -117.884542},
          {lat: 33.881674, lng: -117.884549}
        ];
        var ECoords = [
          {lat: 33.882519, lng: -117.883349},
          {lat: 33.882520, lng: -117.883118},
          {lat: 33.882141, lng: -117.883111},
          {lat: 33.882138, lng: -117.883344},
          {lat: 33.882519, lng: -117.883349}
        ];
        var HCoords = [
          {lat: 33.880634, lng: -117.884533},
          {lat: 33.880635, lng: -117.884245},
          {lat: 33.880576, lng: -117.884245},
          {lat: 33.880585, lng: -117.883884},
          {lat: 33.880534, lng: -117.883885},
          {lat: 33.880534, lng: -117.883841},
          {lat: 33.880401, lng: -117.883837},
          {lat: 33.880400, lng: -117.883861},
          {lat: 33.880386, lng: -117.883860},
          {lat: 33.880383, lng: -117.883880},
          {lat: 33.880338, lng: -117.883879},
          {lat: 33.880331, lng: -117.884242},
          {lat: 33.880274, lng: -117.884240},
          {lat: 33.880269, lng: -117.884516},
          {lat: 33.880386, lng: -117.884519},
          {lat: 33.880387, lng: -117.884454},
          {lat: 33.880516, lng: -117.884458},
          {lat: 33.880515, lng: -117.884530},
          {lat: 33.880634, lng: -117.884533}
        ];

        var EastSideP = [
          {lat: 33.880422, lng: -117.882338},
          {lat: 33.880422, lng: -117.882257},
          {lat: 33.880591, lng: -117.882267},
          {lat: 33.880591, lng: -117.882224},
          {lat: 33.880630, lng: -117.882219},
          {lat: 33.880639, lng: -117.881257},
          {lat: 33.880608, lng: -117.881262},
          {lat: 33.880605, lng: -117.881223},
          {lat: 33.880025, lng: -117.881210},
          {lat: 33.880012, lng: -117.881251},
          {lat: 33.879971, lng: -117.881249},
          {lat: 33.879956, lng: -117.882254},
          {lat: 33.880267, lng: -117.882262},
          {lat: 33.880266, lng: -117.882326},
          {lat: 33.880288, lng: -117.882338},
          {lat: 33.880318, lng: -117.882341},
          {lat: 33.880421, lng: -117.882338}
        ];
        var lotE = [
          {lat: 33.882842, lng: -117.882222},
          {lat: 33.882852, lng: -117.882207},
          {lat: 33.882856, lng: -117.882195},
          {lat: 33.882860, lng: -117.882134},
          {lat: 33.882871, lng: -117.880997},
          {lat: 33.882273, lng: -117.881017},
          {lat: 33.881814, lng: -117.881012},
          {lat: 33.881671, lng: -117.881009},
          {lat: 33.881504, lng: -117.881012},
          {lat: 33.881064, lng: -117.881025},
          {lat: 33.880721, lng: -117.881039},
          {lat: 33.880714, lng: -117.882075},
          {lat: 33.880716, lng: -117.882099},
          {lat: 33.880720, lng: -117.882119},
          {lat: 33.880726, lng: -117.882135},
          {lat: 33.880743, lng: -117.882160},
          {lat: 33.880752, lng: -117.882167},
          {lat: 33.880768, lng: -117.882171},
          {lat: 33.880822, lng: -117.882177},
          {lat: 33.880901, lng: -117.882181},
          {lat: 33.881301, lng: -117.882193},
          {lat: 33.881489, lng: -117.882197},
          {lat: 33.881910, lng: -117.882209},
          {lat: 33.882508, lng: -117.882226},
          {lat: 33.882805, lng: -117.882236},
          {lat: 33.882824, lng: -117.882232},
          {lat: 33.882835, lng: -117.882228},
          {lat: 33.882842, lng: -117.882222}
        ];
        var NutwoodP = [
          {lat: 33.879423, lng: -117.889382},
          {lat: 33.879443, lng: -117.887959},
          {lat: 33.879485, lng: -117.887960},
          {lat: 33.879488, lng: -117.887804},
          {lat: 33.879498, lng: -117.887804},
          {lat: 33.879499, lng: -117.887708},
          {lat: 33.879444, lng: -117.887707},
          {lat: 33.879445, lng: -117.887681},
          {lat: 33.878618, lng: -117.887665},
          {lat: 33.878594, lng: -117.889366},
          {lat: 33.879423, lng: -117.889382}
        ];
        var lotR = [
          {lat: 33.882463, lng: -117.889054},
          {lat: 33.882465, lng: -117.888762},
          {lat: 33.882461, lng: -117.888739},
          {lat: 33.882453, lng: -117.888726},
          {lat: 33.882436, lng: -117.888718},
          {lat: 33.882312, lng: -117.888715},
          {lat: 33.882305, lng: -117.889050},
          {lat: 33.882463, lng: -117.889054}
        ];
        var DDownnsP = [
          {lat: 33.884572, lng: -117.888140},
          {lat: 33.884578, lng: -117.887488},
          {lat: 33.884198, lng: -117.887477},
          {lat: 33.884028, lng: -117.887469},
          {lat: 33.883601, lng: -117.887461},
          {lat: 33.883590, lng: -117.888126},
          {lat: 33.884572, lng: -117.888140}
        ];
        var lotA = [
          {lat: 33.887855, lng: -117.889923},
          {lat: 33.887922, lng: -117.889360},
          {lat: 33.887997, lng: -117.889017},
          {lat: 33.888109, lng: -117.888631},
          {lat: 33.888483, lng: -117.887622},
          {lat: 33.887904, lng: -117.887327},
          {lat: 33.887445, lng: -117.888491},
          {lat: 33.885370, lng: -117.887627},
          {lat: 33.885317, lng: -117.889484},
          {lat: 33.886105, lng: -117.889510},
          {lat: 33.886408, lng: -117.889553},
          {lat: 33.887004, lng: -117.889655},
          {lat: 33.887855, lng: -117.889923}
        ];
        var lotG = [
          {lat: 33.888505, lng: -117.887370},
          {lat: 33.888705, lng: -117.886635},
          {lat: 33.888754, lng: -117.885876},
          {lat: 33.888556, lng: -117.885855},
          {lat: 33.888340, lng: -117.885951},
          {lat: 33.888082, lng: -117.885965},
          {lat: 33.887886, lng: -117.886013},
          {lat: 33.887855, lng: -117.886957},
          {lat: 33.887882, lng: -117.887048},
          {lat: 33.888111, lng: -117.887129},
          {lat: 33.888338, lng: -117.887290},
          {lat: 33.888505, lng: -117.887370}
        ];
        var ArboP = [
          {lat: 33.888258, lng: -117.885310},
          {lat: 33.888262, lng: -117.885034},
          {lat: 33.887737, lng: -117.885007},
          {lat: 33.887715, lng: -117.885315},
          {lat: 33.888258, lng: -117.885310}
        ];
        var lotI = [
          {lat: 33.881654, lng: -117.883478},
          {lat: 33.881664, lng: -117.882588},
          {lat: 33.881333, lng: -117.882580},
          {lat: 33.881320, lng: -117.883247},
          {lat: 33.881263, lng: -117.883371},
          {lat: 33.881346, lng: -117.883477},
          {lat: 33.881654, lng: -117.883478}
        ];
        var lotF = [
          {lat: 33.880770, lng: -117.883508},
          {lat: 33.880919, lng: -117.883260},
          {lat: 33.881071, lng: -117.883199},
          {lat: 33.881074, lng: -117.882576},
          {lat: 33.879847, lng: -117.882542},
          {lat: 33.879818, lng: -117.883332},
          {lat: 33.880026, lng: -117.883496},
          {lat: 33.880740, lng: -117.883516},
          {lat: 33.880770, lng: -117.883508}
        ];
        var CPFSParkingLot = [
          {lat: 33.877301, lng: -117.883974},
          {lat: 33.877307, lng: -117.882692},
          {lat: 33.876445, lng: -117.882676},
          {lat: 33.876437, lng: -117.883968},
          {lat: 33.877301, lng: -117.883974}
        ];
        var lotS = [
          {lat: 33.877301, lng: -117.883974},
          {lat: 33.876441, lng: -117.882677},
          {lat: 33.875857, lng: -117.882669},
          {lat: 33.875843, lng: -117.883953},
          {lat: 33.877301, lng: -117.883974}
        ];
        var lotCEast = [
          {lat: 33.878562, lng: -117.887661},
          {lat: 33.878573, lng: -117.887543},
          {lat: 33.878711, lng: -117.887538},
          {lat: 33.878720, lng: -117.886771},
          {lat: 33.878393, lng: -117.886749},
          {lat: 33.878389, lng: -117.887672},
          {lat: 33.878562, lng: -117.887661}
        ];
        var lotCWest = [
          {lat: 33.878536, lng: -117.889227},
          {lat: 33.878553, lng: -117.888442},
          {lat: 33.878226, lng: -117.888431},
          {lat: 33.878237, lng: -117.889244},
          {lat: 33.878536, lng: -117.889227}
        ];
        var lotC = [
          {lat: 33.878556, lng: -117.888434},
          {lat: 33.878529, lng: -117.888302},
          {lat: 33.878455, lng: -117.888208},
          {lat: 33.878366, lng: -117.888246},
          {lat: 33.878215, lng: -117.888262},
          {lat: 33.878228, lng: -117.888428},
          {lat: 33.878556, lng: -117.888434}
        ];

        var EducationBuilding = [PLSCoords, PLCoords, RGCCoords, UHCoords, LHCoords, MHCoords, DBHCoords, ECCoords, ECoords, HCoords];
        var parkingStructures = [EastSideP, lotE, NutwoodP, lotR, DDownnsP, lotA, lotG, ArboP, lotI, lotF, CPFSParkingLot, lotS, lotCEast, lotCWest, lotC];

        var educationBuildingPlygon = new google.maps.Polygon({
          paths: EducationBuilding,
          strokeColor: '#000000',
          strokeOpacity: 0,
          strokeWeight: 2,
          fillColor: '#FFA500',
          fillOpacity: 1
        });

        var parkingPolygon = new google.maps.Polygon({
          paths: parkingStructures,
          strokeColor: '#000000',
          strokeOpacity: 0,
          strokeWeight: 2,
          fillColor: '#00FFFF',
          fillOpacity: 1
        });

        educationBuildingPlygon.setMap(map);
        parkingPolygon.setMap(map);
        directionsDisplay.setMap(map);

        {% block maproute %} {% endblock %}
    }
    document.getElementById('src1').value = "";
</script>

{% endblock %}

{% block utilscript %}
<script>
    //$('.login.modal').modal('attach events', '.icon.button', 'show');

    $('.ui.dropdown').dropdown({
        onChange: function (val, text, $selectedItem) {
            document.getElementById('location').value = val;
        }
    });

    $('.ui.dropdown').dropdown('set selected', '{{ cur }}');

    $(document).ready(function(){
         $('#loginbutton').click(function(){
            $('#loginmodal').modal('show');
         });
         $('#offline-map').click(function(){
            $('#legendmodal').modal('show');
         });
    });

    $('.ui.sidebar').sidebar({
            context: $('#sidemenu'),
            dimPage: false,
            transition: 'overlay',
            exclusive: false,
            closable: false
    });
    $('.ui.sidebar').sidebar('attach events', '#left-sidebar-toggle');

    var locations = ['ebuildings', 'fdbuildings', 'abuildings', 'lm', 'fbuildings', 'pbuildings', 'cy', 'abuildings', 'ssbuildings', 'tbuildings', 'sbuildings', 'embuildings'];

    $('.ui.checkbox.ebuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button ebuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button ebuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.fdbuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button fdbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button fdbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });

    $('.ui.checkbox.abuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button abuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button abuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.bbuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button bbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button bbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.lm').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button lm');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button lm');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.fbuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button fbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button fbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.pbuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button pbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button pbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.cy').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button cy');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button cy');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.abuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button abuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button abuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.ssbuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button ssbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button ssbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.tbuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button tbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button tbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.sbuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button sbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button sbuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
    $('.ui.checkbox.embuildings').checkbox({
        onChecked: function () {
                var mulButtons = document.getElementsByClassName('button embuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="OFF";
                    mulButtons[j].click();
                }
        },
        onUnchecked: function () {
                var mulButtons = document.getElementsByClassName('button embuildings');
                for(let j = 0; j < mulButtons.length; j++){
                    mulButtons[j].value="ON";
                    mulButtons[j].click();
                }
        }
    });
</script>
{% endblock %}
